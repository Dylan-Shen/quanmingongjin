var app=angular.module("app",["ui.router","ngResource"]);app.config(["$stateProvider","$urlRouterProvider",function(e,r){r.otherwise("/homepage"),r.when("/userperson/userSetting","/userperson/userSetting/1"),e.state("homepage",{url:"/homepage",templateUrl:"view/homepageView.html",controller:"homepageCtrl"}).state("detail",{url:"/detail/:id",templateUrl:"view/detailView.html",controller:"detailCtrl"}).state("user",{url:"/user",templateUrl:"view/userView.html",controller:"userCtrl"}).state("circle",{url:"/circle",templateUrl:"view/circleView.html",controller:"circleCtrl"}).state("register",{url:"/register",templateUrl:"view/registerView.html",controller:"registerCtrl"}).state("login",{url:"/login",templateUrl:"view/loginView.html",controller:"loginCtrl"}).state("program",{url:"/program",templateUrl:"view/programView.html",controller:"programCtrl"}).state("program1",{url:"/program/:hot",templateUrl:"view/programView.html",controller:"programCtrl"}).state("userperson",{url:"/userperson",templateUrl:"view/userpersonView.html",controller:"userpersonCtrl"}).state("userperson.userHome",{url:"/userHome",templateUrl:"view/userHomeView.html",controller:"userHomeCtrl"}).state("userperson.userMessage",{url:"/userMessage",templateUrl:"view/userMessageView.html",controller:"userMessageCtrl"}).state("userperson.userSetting",{url:"/userSetting",templateUrl:"view/userSettingView.html",controller:"userSettingCtrl"}).state("userperson.userSetting.1",{url:"/1",templateUrl:"view/userSettingView1.html",controller:"userSettingCtrl"}).state("userperson.userSetting.2",{url:"/2",templateUrl:"view/userSettingView2.html",controller:"userSettingCtrl"}).state("userperson.userSetting.3",{url:"/3",templateUrl:"view/userSettingView3.html",controller:"userSettingCtrl"}).state("userperson.userCircle",{url:"/userCircle",templateUrl:"view/userCircleView.html",controller:"userCircleCtrl"}).state("userperson.userRecord",{url:"/userRecord",templateUrl:"view/userRecordView.html",controller:"userRecordCtrl"}).state("support",{url:"/support/:id/:reprice/:num",templateUrl:"view/supportView.html",controller:"supportCtrl"}).state("support.class1",{url:"/class1",templateUrl:"view/support1View.html"}).state("support.class2",{url:"/class2",templateUrl:"view/support2View.html"}).state("support.class3",{url:"/class3",templateUrl:"view/support3View.html"}).state("support.class2.supportBox1",{url:"/supportBox1",templateUrl:"view/supportBox1View.html"}).state("support.class2.supportBox2",{url:"/supportBox2",templateUrl:"view/supportBox2View.html"})}]),app.directive("appHeader",function(){return{templateUrl:"view/header.html"}}),app.directive("appFooter",function(){return{templateUrl:"view/footer.html"}}),app.controller("importantCtrl",["$scope","$resource","$rootScope","$timeout",function(e,r,t,l){t.currentUser=[],localStorage.getItem("currentUser")||sessionStorage.getItem("currentUser")?t.loginShow=!0:t.loginShow=!1,t.key=localStorage.currentUser||sessionStorage.currentUser,e.cancelFn=function(){alert("退出成功!"),t.loginShow=!1,localStorage.removeItem("currentUser"),sessionStorage.removeItem("currentUser")};var s=r("message.json"),o=r("person1.json");s.get(function(r){e.message=r.message,e.filmClassName=r.filmClassName,e.cooperativeSrc=r.cooperativeSrc,e.currentHot=r.currentHot,e.userImg=r.userImg,e.start=r.start,e.start1=r.start1,e.payBank=r.payBank},function(e){}),o.get(function(r){e.deal=r.deal,e.attention=r.attention,e.userMessage=r.userMessage},function(e){})}]);
app.controller("circleCtrl",["$scope",function(c){}]);
app.controller("detailCtrl",["$scope","$stateParams","$rootScope","$state",function(e,t,r,s){e.userSupportFn=function(e,t){""==r.currentUser?(alert("请登录您的账号!"),s.go("register")):s.go("support.class1",{id:e,reprice:t})},e.item=e.message[t.id],e.showIndex=1,e.detailLeftShow=function(t){e.showIndex=t},e.addTree=function(){var t=e.item.course;if($(".tree-box").find(".tree-text").length<2){$(".tree-box").css({height:120*t.length});for(var r=0;r<t.length;r++)$("<div/>",{class:"tree-box1"}).css({top:50+120*r}).appendTo($(".tree-box")),$("<div/>",{class:"tree-circle"}).css({top:40+120*r,left:-10}).appendTo($(".tree-box")),$("<div/>",{class:"tree-text"}).css({top:40+120*r}).appendTo($(".tree-box"));for(var s=0,r=0;r<t.length;r++)$("<h5/>").text(t[r].time).appendTo($(".tree-text")[r]),$("<p/>").text(t[r].active).appendTo($(".tree-text")[r]),0==t[r].center?(s%2==0&&($(".tree-box1").eq(r).css({left:-50}),$(".tree-text").eq(r).css({left:-250,"text-align":"right"})),s%2==1&&($(".tree-box1").eq(r).css({left:0}),$(".tree-text").eq(r).css({left:50,"text-align":"left"})),s++):($(".tree-box1").eq(r).hide(),$(".tree-circle").eq(r).hide(),$(".tree-text").eq(r).css({left:-110,"text-align":"center",padding:"10px",background:"#ff4200","border-radius":"4px"}).find("p").css({color:"#fff"}))}}}]);
app.controller("homepageCtrl",["$scope","$interval",function(e,a){e.detailsShow=function(a){e.show[a]=!0},e.flag=0;var n=a(function(){return e.flag>=e.message.length-1?void(e.flag=0):void e.flag++},2e3);e.bannerPrev=function(){a.cancel(n),e.flag--,e.flag<0&&(e.flag=e.message.length-1),n=a(function(){return e.flag>=e.message.length-1?void(e.flag=0):void e.flag++},2e3)},e.bannerNext=function(){a.cancel(n),e.flag++,e.flag==e.message.length&&(e.flag=0),n=a(function(){return e.flag>=e.message.length-1?void(e.flag=0):void e.flag++},2e3)}}]);
app.controller("loginCtrl",["$scope","$rootScope","$interval","$timeout","$state",function(n,o,e,l,r){function t(){var n=String((new Date).getTime());return hex_md5(n)}n.loginBtnShow=!1,n.loginTelShow=!0,n.changeFn=function(o){o==n.loginTelNum?n.loginTelShow=!1:n.loginTelShow=!0},n.loginBtnFn=function(){n.loginTelShow=!0,n.loginBtnShow=!n.loginBtnShow;var o=10;n.loginTelNum=Math.round(1e4*Math.random()),n.userPhoneValue="您的验证码为 :  "+n.loginTelNum,userForm.loginBtnValue.innerHTML=o+"s后可再次获取",e(function(){userForm.loginBtnValue.innerHTML=o+"s后可再次获取",o--},1e3,11),l(function(){n.loginBtnShow=!1,userForm.loginBtnValue.innerHTML="点击获取验证码"},11e3)},o.loginSubmitFn=function(){var n=t(),o={phone:userForm.userPhone.value,password:userForm.userPassword.value};window.localStorage&&localStorage.setItem(n,JSON.stringify(o)),alert("注册成功"),r.go("register")}}]);
app.controller("programCtrl",["$scope","$stateParams","$timeout",function(o,i,m){o.filmShowIndex1=0,o.filmShowIndex2=0,o.filmShow11=o.filmClassName[0],o.filmShow22=o.start[0],i.hot?(o.filmShowIndex3=1,o.filmShow33=o.start1[1]):(o.filmShowIndex3=0,o.filmShow33=o.start1[0]),o.filmShow1=function(i){o.filmShowIndex1=i,o.filmShow11=o.filmClassName[i],o.mainShow()},o.filmShow2=function(i){o.filmShowIndex2=i,o.filmShow22=o.start[i],o.mainShow()},o.filmShow3=function(i){o.filmShowIndex3=i,o.filmShow33=o.start1[i],o.mainShow()},o.mainShow=function(){m(function(){o.mainShowState=0==angular.element(document.querySelector(".homepage-mainof-2-list")).children("li").length},20)},o.filmFn=function(i){return o.filmShow11==o.filmClassName[0]?i.start==o.filmShow22&&i.start1==o.filmShow33:i.class==o.filmShow11&&i.start==o.filmShow22&&i.start1==o.filmShow33},o.mainShow()}]);
app.controller("registerCtrl",["$scope","$rootScope","$state",function(e,r,s){e.userS=[],e.userN=[],e.userP=[],e.remember=!1,e.registerPhoneP="*请输入正确的手机号码",e.registerPhonePShow=!1,e.registerPasswordP="*密码为6-12位",e.registerPasswordPShow=!1;var o=window.localStorage;console.log(o),console.log(o.getItem(o.key(0))),console.log(JSON.parse(o.getItem(o.key(0)))),console.log(JSON.parse(o.getItem(o.key(0))).phone);for(var t=0;t<o.length;t++)e.userN.push(JSON.parse(o.getItem(o.key(t))).phone),e.userP.push(JSON.parse(o.getItem(o.key(t))).password);e.rememberMe=function(e,r){switch(console.log(e),e){case!0:localStorage.setItem("currentUser",r);break;case!1:sessionStorage.setItem("currentUser",r)}},e.rememberClick=function(){e.remember=!e.remember},e.registerClick=function(){e.registerPhonePShow=!1,e.registerPasswordPShow=!1;for(var o=0,t=0,n=0;n<e.userN.length;n++)if(userForm.userPhone.value==e.userN[n]){if(userForm.userPassword.value==e.userP[n])return e.rememberMe(e.remember,e.userN[n]),r.loginShow=!0,void s.go("userperson.userHome");t++,e.registerPasswordP="密码输入错误",e.registerPasswordPShow=!0}else o++;o==e.userN.length&&(e.registerPhoneP="请检查您的手机号",e.registerPhonePShow=!0)}}]);
app.controller("supportCtrl",["$scope","$stateParams",function(e,r){e.item=e.message[r.id],e.reprice=r.reprice,e.supportNum=r.num,2==e.supportNum&&$(".order>li").eq(0).addClass("order-hide"),3==e.supportNum&&($(".order>li").eq(0).addClass("order-hide"),$(".order>li").eq(1).addClass("order-hide")),e.payIndex=0,e.payFn=function(r){e.payIndex=r}}]);
app.controller("userCircleCtrl",["$scope",function(r){}]);
app.controller("userHomeCtrl",["$scope",function(o){o.attentionMessage=[];for(var e=0;e<o.attention.length;e++)o.attentionMessage.push(o.message[e]);o.hotMessage=[];for(var t=0;t<o.currentHot.length;t++)o.hotMessage.push(o.message[t]);o.showA1=!0,o.showA2=!0,o.showText=["查看更多","收起"],o.showNum1=[4,o.attention.length],o.showNum2=[3,o.currentHot.length],o.showMore1=function(){o.showA1=!o.showA1},o.showMore2=function(){o.showA2=!o.showA2}}]);
app.controller("userMessageCtrl",["$scope",function(o){o.myShow=[];for(var n=0;n<o.filmClassName.length;n++)o.myShow[n]=!1;o.radioBoxFn=function(n){o.myShow[n]=!o.myShow[n]},o.radioBoxFn1Show=!0,o.radioBoxFn1Index=1,o.radioBoxFn1=function(n){o.radioBoxFn1Index!=n&&(o.radioBoxFn1Index=n,o.radioBoxFn1Show=!o.radioBoxFn1Show)}}]);
app.controller("userpersonCtrl",["$scope","$rootScope","$state","$stateParams",function(e,n,o,t){n.currentUser=t,e.screen=["全部","已支付","未支付"],e.num=0,e.show="",e.checkContent=function(n){e.show=["",!0,!1][n],e.num=n}}]);
app.controller("userRecordCtrl",["$scope","$state",function(e,o){}]);
app.controller("userSettingCtrl",["$scope","$state",function(t,e){}]);